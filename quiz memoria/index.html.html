<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego Memoria ‚Äî versi√≥n para aprendices</title>

  <style>
    /* ======= ESTILOS SENCILLOS Y CLAROS ======= */
    :root{
      --ancho-carta:120px;
      --alto-carta:160px;
    }
    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family:system-ui, Arial, sans-serif;
      color:#fff;
      /* Fondo por defecto (se cambia al cargar cada nivel) */
      background:#0b243b url('Juego/carros/1.jpg') center/cover fixed no-repeat;
    }
    .capa{
      min-height:100dvh;
      padding:24px 16px 40px;
      background: radial-gradient(transparent, rgba(0,0,0,.7) 60%);
    }
    h1{ margin:0 0 10px; text-align:center; font-weight:800 }
    #panel{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:center;
      background:rgba(0,0,0,.55); padding:10px 12px; border-radius:10px;
    }
    #panel .dato{ background:#0f2a44; padding:4px 8px; border-radius:8px }

    #btnComenzar{ 
      cursor:pointer; 
      border:0; 
      border-radius:10px; 
      padding:8px 14px; 
      background:#ff8a00; 
      color:#111; 
      font-weight:700 
    }

    #tablero{
      width:min(95vw,560px);
      margin:18px auto 10px;
      display:grid; 
      grid-template-columns:repeat(4, var(--ancho-carta));
      gap:10px; justify-content:center;
    }
    .carta{
      width:var(--ancho-carta); 
      height:var(--alto-carta);
      position:relative; 
      perspective:800px; 
      cursor:pointer; 
      user-select:none;
    }
    /* Reverso = signo de interrogaci√≥n */
    .reverso, .cara{
      position:absolute; 
      inset:0; 
      border-radius:12px; 
      backface-visibility:hidden;
      background:#12263a url('interrogante.jpg') center/cover no-repeat;
    }
    /* Cara = imagen real de la carta */
    .cara{ 
      transform: rotateY(180deg); 
      overflow:hidden; 
    }

    .cara img{ 
      width:100%; 
      height:100%; 
      object-fit:cover; 
      display:block 
    }

    /* Voltear (simple con rotateY) */
    .carta.volteada .cara{ transform:rotateY(0) }
    .carta.volteada .reverso{ transform:rotateY(180deg) }

    /* Carta acertada: se ‚Äúmarca‚Äù con un check y un leve resalto */
    .carta.acertada .cara{ 
      filter:grayscale(0.2) brightness(1.05) 
    }

    .carta.acertada::after{
      content:""; 
      position:absolute; 
      inset:0; 
      border-radius:12px;
      background:url('2imagen.png') center/55px 55px no-repeat rgba(0,255,153,.15)
    }

    
    table{
      width:min(95vw,720px); 
      margin:10px auto; 
      border-collapse:collapse; 
      background:rgba(0,0,0,.55); 
      border-radius:10px; 
      overflow:hidden 
    }

    th,td{ 
      padding:8px 10px; 
      border-bottom:1px solid rgba(255,255,255,.08); 
      text-align:left 
    }
    
    th{ 
      background:rgba(255,255,255,.06) 
    }
    
    .center{text-align:center}
    
  </style>
</head>
<body>
<div class="capa">
  <h1>Juego Memoria</h1>

  <!-- ======= PANEL SUPERIOR CON DATOS ======= -->
  <div id="panel">
    <span id="datoJugador"  class="dato">Jugador: ‚Äî</span>
    <span id="datoNivel"    class="dato">Nivel: 1</span>
    <span id="datoAciertos" class="dato">Aciertos: 0</span>
    <span id="datoIntentos" class="dato">Intentos: 0</span>
    <span id="datoTiempo"   class="dato">Tiempo: 30</span>
    <button id="btnComenzar">Comenzar</button>
  </div>

  <h3 class="center" style="margin:14px 0 6px">Tablero de juego</h3>
  <div id="tablero" aria-label="Tablero de cartas"></div>

  <!-- ======= TABLA DE REGISTRO DE JUGADORES ======= -->
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Jugador</th>
        <th>Nivel alcanzado</th>
        <th>Intentos</th>
        <th>Aciertos</th>
        <th>Tiempo restante</th>
      </tr>
    </thead>
    <tbody id="tablaJugadores"></tbody>
  </table>
</div>

<!-- ======= AUDIOS: IDs con nombres iguales al archivo para no confundirse ======= -->
<audio id="audioClickMp3"    src="sonidos/click.mp3"    preload="auto"></audio>
<audio id="audioCorrerMp3"   src="sonidos/correr.mp3"   preload="auto"></audio>
<audio id="audioDerrotaMp3"  src="sonidos/derrota.mp3"  preload="auto"></audio>
<audio id="audioErrorMp3"    src="sonidos/error.mp3"    preload="auto"></audio>
<audio id="audioJugarMp3"    src="sonidos/jugar.mp3"    preload="auto"></audio>
<audio id="audioSuccessMp3"  src="sonidos/success.mp3"  preload="auto"></audio>
<audio id="audioTriunfoMp3"  src="sonidos/triunfo.mp3"  preload="auto"></audio>

<script>
/* =======================================================================
   VARIABLES GLOBALES (nombres simples y descriptivos para aprendices)
   ======================================================================= */
let nombreJugador = "";           // lo pedimos con prompt al iniciar
let nivelActual = 1;              // 1 = carros, 2 = motos (puedes agregar m√°s)
let aciertosEnNivel = 0;          // cu√°ntas parejas acert√≥ en el nivel
let intentosTotales = 0;          // cu√°ntas comparaciones hizo
const tiempoPorNivel = 30;        // segundos por nivel
let tiempoRestante = tiempoPorNivel;

let idReloj = null;               // guarda el setInterval para poder detenerlo
let cartasVolteadas = [];         // aqu√≠ guardamos las 2 cartas para comparar
let bloqueoTablero = false;       // evita que voltee m√°s de 2 a la vez
let avisoDiezSegundos = false;    // para reproducir "correr.mp3" una sola vez

// Arreglos de im√°genes: 6 √∫nicas ‚Üí se duplican para armar 12 cartas
const imagenesCarros = ['Juego/carros/1.jpg','Juego/carros/2.jpg','Juego/carros/3.jpg','Juego/carros/4.jpg','Juego/carros/5.jpg','Juego/carros/6.jpg'];
const imagenesMotos  = ['Juego/motos/1.jpg','Juego/motos/2.jpg','Juego/motos/3.png','Juego/motos/4.jpg','Juego/motos/5.jpg','Juego/motos/6.jpg'];

// Lista de niveles en orden: puedes a√±adir m√°s arrays con 6 im√°genes
const nivelesImagenes = [imagenesCarros, imagenesMotos];

/* =======================================================================
   REFERENCIAS AL DOM (elementos de la p√°gina)
   ======================================================================= */
const elTablero         = document.getElementById('tablero');
const elBtnComenzar     = document.getElementById('btnComenzar');
const elDatoJugador     = document.getElementById('datoJugador');
const elDatoNivel       = document.getElementById('datoNivel');
const elDatoAciertos    = document.getElementById('datoAciertos');
const elDatoIntentos    = document.getElementById('datoIntentos');
const elDatoTiempo      = document.getElementById('datoTiempo');
const elTablaJugadores  = document.getElementById('tablaJugadores');

/* =======================================================================
   AUDIOS (variables con el MISMO nombre que el archivo para no confundirse)
   ======================================================================= */
const audioClickMp3   = document.getElementById('audioClickMp3');   // al voltear carta
const audioCorrerMp3  = document.getElementById('audioCorrerMp3');  // √∫ltimos 10 segundos (loop controlado por JS)
const audioDerrotaMp3 = document.getElementById('audioDerrotaMp3'); // fin por tiempo agotado
const audioErrorMp3   = document.getElementById('audioErrorMp3');   // pareja incorrecta
const audioJugarMp3   = document.getElementById('audioJugarMp3');   // m√∫sica de fondo (loop en etiqueta)
const audioSuccessMp3 = document.getElementById('audioSuccessMp3'); // pareja correcta
const audioTriunfoMp3 = document.getElementById('audioTriunfoMp3'); // gan√≥ todos los niveles

/* =======================================================================
   EVENTO DEL BOT√ìN "COMENZAR"
   ======================================================================= */
elBtnComenzar.addEventListener('click', iniciarJuego);

/* =======================================================================
   FUNCI√ìN: iniciarJuego()
   - Pide el nombre
   - Resetea contadores
   - Prepara el tablero del nivel 1
   - Inicia el temporizador
   - Enciende la m√∫sica de fondo "jugar.mp3" en loop
   ======================================================================= */
function iniciarJuego(){
  const nombre = prompt('Ingresa tu nombre:');
  if(!nombre) return; // Si cancela, no hace nada

  nombreJugador = nombre.trim();
  nivelActual = 1;
  aciertosEnNivel = 0;
  intentosTotales = 0;
  tiempoRestante = tiempoPorNivel;
  avisoDiezSegundos = false;

  // M√∫sica de fondo durante todo el juego
  try { audioJugarMp3.volume = 0.6; audioJugarMp3.play(); } catch(e){}

  actualizarPanel();
  crearTableroParaNivel(nivelActual);
  iniciarReloj();
}

/* =======================================================================
   FUNCI√ìN: crearTableroParaNivel(nivel)
   - Genera 12 cartas (6 im√°genes duplicadas y mezcladas)
   - Resetea variables que controlan el flujo del nivel
   ======================================================================= */
function crearTableroParaNivel(nivel){
  elTablero.innerHTML = '';      // limpia el tablero
  cartasVolteadas = [];          // vac√≠a selecci√≥n
  bloqueoTablero = false;        // permite volver a jugar
  avisoDiezSegundos = false;     // a√∫n no son√≥ "correr"
  detenerSonidoCorrer();         // por si qued√≥ sonando del nivel anterior

  // Copia de las im√°genes del nivel y duplicadas para formar parejas
  const lista = nivelesImagenes[nivel-1].slice();
  const cartas = mezclar([...lista, ...lista]); // mezcla aleatoria

  // Cambiamos la imagen de fondo seg√∫n nivel (decorativo)
  document.body.style.backgroundImage =
    (nivel === 1) ? "url('Juego/carros/1.jpg')" : "url('Juego/motos/1.jpg')";

  // Crea cada carta con su ‚Äúcara‚Äù (imagen) y su ‚Äúreverso‚Äù (interrogante)
  cartas.forEach((ruta, i)=>{
    const carta = document.createElement('div');
    carta.className = 'carta';
    carta.dataset.ruta = ruta; // para comparar luego
    carta.dataset.index = i;

    const cara = document.createElement('div');
    cara.className = 'cara';
    const img = document.createElement('img');
    img.src = ruta;
    cara.appendChild(img);

    const reverso = document.createElement('div');
    reverso.className = 'reverso';

    carta.appendChild(cara);
    carta.appendChild(reverso);

    // Al hacer click ‚Üí llamar a voltearCarta(carta)
    carta.addEventListener('click', ()=>voltearCarta(carta));
    elTablero.appendChild(carta);
  });
}

/* =======================================================================
   FUNCI√ìN: voltearCarta(carta)
   - Controla que no se volteen m√°s de 2 cartas a la vez
   - Guarda las 2 cartas para compararlas
   ======================================================================= */
function voltearCarta(carta){
  if (bloqueoTablero) return;                     // bloqueado mientras comparamos
  if (carta.classList.contains('volteada')) return; // ya est√° boca arriba
  if (carta.classList.contains('acertada')) return; // ya fue acertada

  // Sonido de click al voltear
  try { audioClickMp3.currentTime = 0; audioClickMp3.play(); } catch(e){}

  carta.classList.add('volteada');
  cartasVolteadas.push(carta);

  // Cuando hay 2, se comparan
  if (cartasVolteadas.length === 2) {
    bloqueoTablero = true;       // evita que se voltee una tercera
    intentosTotales++;           // cuenta el intento
    actualizarPanel();
    compararPareja();
  }
}

/* =======================================================================
   FUNCI√ìN: compararPareja()
   - Compara las 2 cartas en cartasVolteadas
   - Si son iguales ‚Üí acierto (mantener volteadas)
   - Si son distintas ‚Üí error (se giran de nuevo)
   ======================================================================= */
function compararPareja(){
  const [c1, c2] = cartasVolteadas;
  const sonIguales = c1.dataset.ruta === c2.dataset.ruta;

  if (sonIguales) {
    // Acierto: sonido corto y marcar cartas
    aciertosEnNivel++;
    try { audioSuccessMp3.currentTime = 0; audioSuccessMp3.play(); } catch(e){}
    c1.classList.add('acertada'); c2.classList.add('acertada');

    // Limpiar selecci√≥n y permitir seguir
    cartasVolteadas = [];
    bloqueoTablero = false;

    actualizarPanel();
    revisarFinDeNivel();   // ¬øya complet√≥ las 6 parejas?
  } else {
    // Error: sonido y volver a girar luego de 700ms
    try { audioErrorMp3.currentTime = 0; audioErrorMp3.play(); } catch(e){}
    setTimeout(()=>{
      c1.classList.remove('volteada');
      c2.classList.remove('volteada');
      cartasVolteadas = [];
      bloqueoTablero = false;
    }, 700);
  }
}

/* =======================================================================
   FUNCI√ìN: revisarFinDeNivel()
   - Si complet√≥ 6 parejas, anuncia y pasa al siguiente nivel (si existe)
   - Si no hay m√°s niveles, GAN√ì la partida (triunfo.mp3)
   ======================================================================= */
function revisarFinDeNivel(){
  if (aciertosEnNivel === 6) {
    detenerReloj();
    detenerSonidoCorrer();

    // Guardamos el n√∫mero del nivel que se acaba de completar
    const nivelCompletado = nivelActual;
    setTimeout(()=>alert('üéâ ¬°Nivel ' + nivelCompletado + ' completado!'), 120);

    // ¬øHay m√°s niveles?
    if (nivelActual < nivelesImagenes.length) {
      // Avanzar al siguiente nivel
      nivelActual++;
      aciertosEnNivel = 0;
      intentosTotales = 0;
      tiempoRestante = tiempoPorNivel;

      actualizarPanel();
      crearTableroParaNivel(nivelActual);
      iniciarReloj(); // empezar a contar otra vez
    } else {
      // No hay m√°s niveles ‚Üí TRIUNFO FINAL
      registrarJugador();
      try { audioTriunfoMp3.currentTime = 0; audioTriunfoMp3.play(); } catch(e){}
      setTimeout(()=>alert('üèÜ ¬°Has completado todos los niveles!'), 150);
    }
  }
}

/* =======================================================================
   FUNCI√ìN: iniciarReloj()
   - Usa setInterval para restar 1 segundo
   - A los 10 segundos restantes, reproduce "correr.mp3" en loop
   - Cuando llega a 0, fin de partida ‚Üí DERROTA
   ======================================================================= */
function iniciarReloj(){
  detenerReloj(); // seguridad por si estaba corriendo
  elDatoTiempo.textContent = 'Tiempo: ' + tiempoRestante;

  idReloj = setInterval(()=>{
    tiempoRestante--;
    elDatoTiempo.textContent = 'Tiempo: ' + tiempoRestante;

    // Cuando queden 10s, activamos el sonido "correr.mp3" una sola vez
    if (!avisoDiezSegundos && tiempoRestante <= 10) {
      avisoDiezSegundos = true;
      try {
        audioCorrerMp3.loop = true;
        audioCorrerMp3.volume = 0.85;
        audioCorrerMp3.currentTime = 0;
        audioCorrerMp3.play();
      } catch(e){}
    }

    // ¬øSe qued√≥ sin tiempo? ‚Üí Derrota
    if (tiempoRestante <= 0) {
      detenerReloj();
      detenerSonidoCorrer();
      try { audioDerrotaMp3.currentTime = 0; audioDerrotaMp3.play(); } catch(e){}
      alert('‚è≥ ¬°Tiempo agotado!');
      registrarJugador();
      bloqueoTablero = true; // Evita seguir jugando hasta reiniciar
    }
  }, 1000);
}

/* =======================================================================
   FUNCIONES AUXILIARES: detenerReloj, detenerSonidoCorrer, actualizarPanel,
   registrarJugador, mezclar (aleatorio simple), esc (escape de texto)
   ======================================================================= */
function detenerReloj(){ if (idReloj) clearInterval(idReloj); idReloj = null; }

function detenerSonidoCorrer(){
  try { audioCorrerMp3.pause(); audioCorrerMp3.currentTime = 0; } catch(e){}
}

function actualizarPanel(){
  elDatoJugador.textContent  = 'Jugador: ' + (nombreJugador || '‚Äî');
  elDatoNivel.textContent    = 'Nivel: ' + nivelActual;
  elDatoAciertos.textContent = 'Aciertos: ' + aciertosEnNivel;
  elDatoIntentos.textContent = 'Intentos: ' + intentosTotales;
  elDatoTiempo.textContent   = 'Tiempo: ' + tiempoRestante;
}

function registrarJugador(){
  const fila = document.createElement('tr');
  const numero = elTablaJugadores.children.length + 1;
  fila.innerHTML = `
    <td>${numero}</td>
    <td>${esc(nombreJugador)}</td>
    <td>${nivelActual}</td>
    <td>${intentosTotales}</td>
    <td>${aciertosEnNivel}</td>
    <td>${tiempoRestante} seg.</td>
  `;
  elTablaJugadores.appendChild(fila);
}

/* Mezcla r√°pida para este proyecto educativo (suficiente para el juego) */
function mezclar(arr){ return arr.sort(()=>Math.random() - 0.5); }

/* Escapa caracteres especiales por si el jugador escribe s√≠mbolos raros */
function esc(t){ return (t+'').replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s])); }
</script>
</body>
</html>


<!-- Esa funci√≥n es un truco sencillo para ‚Äúbarajar‚Äù (mezclar aleatoriamente) un arreglo en JavaScript.
Mira l√≠nea por l√≠nea:

function mezclar(arr){
  return arr.sort(()=>Math.random() - 0.5);
}

¬øQu√© pasa aqu√≠?

arr.sort(...)

El m√©todo .sort() normalmente ordena un arreglo comparando dos elementos a la vez.

Por defecto los ordena alfab√©ticamente, pero si le damos una funci√≥n de comparaci√≥n, usar√° lo que devuelva esa funci√≥n para decidir.

()=>Math.random() - 0.5

Math.random() genera un n√∫mero entre 0 y 1.

Al restarle 0.5, el resultado queda entre -0.5 y +0.5.

A veces negativo (‚âà ordenar ‚Äúa la izquierda‚Äù), a veces positivo (‚âà ordenar ‚Äúa la derecha‚Äù).

Entonces cada par de elementos se coloca en un orden aleatorio, lo que hace que el arreglo termine mezclado.

Ejemplo
let numeros = [1,2,3,4,5,6];
let mezclados = mezclar(numeros);

console.log(mezclados);
// ‚Üí podr√≠a mostrar [3,6,1,4,2,5] -->